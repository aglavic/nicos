description = 'MP Developing'

group = 'lowlevel'

includes = ['nokbus1', 'nokbus3', 'nokbus4']
instrument_values = configdata('instrument.values')
showcase_values = configdata('cf_showcase.showcase_values')
optic_values = configdata('cf_optic.optic_values')

tango_base = instrument_values['tango_base']
code_base = instrument_values['code_base']

devices = dict(
    bs1r_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of BS1, reactor side',
        abslimits = (-178.0, 11.8),
        bus = 'nokbus4',
        addr = 0x67,
        slope = 800.0,
        speed = 50,
        accel = 50,
        confbyte = 32,
        ramptype = 2,
        microstep = 1,
        refpos = -41.8,
        zerosteps = int(791.825 * 800),
        lowlevel = False,  # showcase_values['hide_poti'] and showcase_values['NOreference'],
    ),
    bs1s_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of BS1, sample side',
        abslimits = (-177.002, 139.998),
        bus = 'nokbus4',
        addr = 0x68,
        slope = 800.0,
        speed = 50,
        accel = 50,
        confbyte = 32,
        ramptype = 2,
        microstep = 1,
        refpos = 89.529,
        zerosteps = int(660.44 * 800),
        lowlevel = False,  # showcase_values['hide_poti'] and showcase_values['NOreference'],
    ),
    nok2r_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK2, reactor side',
        abslimits = (-22.36, 10.88),
        bus = 'nokbus1',
        addr = 0x32,
        slope = 2000.0,
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = -4.42,
        zerosteps = int(254.36 * 2000),
        lowlevel = False,  # showcase_values['hide_poti'],
    ),
    nok2s_motor = device(code_base + 'ipc.NOKMotorIPC',
         description = 'IPC controlled Motor of NOK2, sample side',
         abslimits = (-21.61, 6.885),
         bus = 'nokbus1',
         addr = 0x33,
         slope = 2000.0,
         speed = 10,
         accel = 10,
         confbyte = 48,
         ramptype = 2,
         microstep = 1,
         refpos = -18.19,
         zerosteps = int(268.11 * 2000),
         lowlevel = False,  # showcase_values['hide_poti'],
    ),
    nok3r_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK3, reactor side',
        abslimits = (-21.967, 47.783),
        bus = 'nokbus1',
        addr = 0x34,
        slope = 2000.0,
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 20.6225,
        zerosteps = int(229.467 * 2000),
        lowlevel = False,  # showcase_values['hide_poti'],
    ),
    nok3s_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK3, sample side',
        abslimits = (-20.9435, 40.8065),
        bus = 'nokbus1',
        addr = 0x35,
        slope = 2000.0,
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 9.444,
        zerosteps = int(240.694 * 2000),
        lowlevel = False,  # showcase_values['hide_poti'],
    ),
    nok4r_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK4, reactor side',
        abslimits = (-20.477, 48.523),
        bus = 'nokbus1',
        addr = 0x36,
        slope = 2000.0,
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 20.2135,
        zerosteps = int(229.977 * 2000),
        lowlevel = False,  # showcase_values['hide_poti'],
    ),
    nok4s_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK4, sample side',
        # 2020-04-25 22:31:49 abslimits = (-21.3025, 41.1975),
        abslimits = (-21.3025, 25.19),
        bus = 'nokbus4',
        addr = 0x64,
        slope = 2000.0,
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 9.143,
        zerosteps = int(240.803 * 2000),
        lowlevel = False, #showcase_values['hide_poti'],
    ),
    nok5ar_motor = device(code_base + 'beckhoff.nok.BeckhoffMotorCab1M1x',
        description = 'nok5a motor (M11), reactor side',
        tangodevice = tango_base + 'optic/io/modbus',
        address = 0x3020+2*10, # word addresses
        slope = 10000,
        unit = 'mm',
        abslimits = (-70.0,67.68),
        ruler = 267.689, #abs enc! 71.0889,
        lowlevel = False,
    ),
    nok5as_motor = device(code_base + 'beckhoff.nok.BeckhoffMotorCab1M1x',
        description = 'nok5a motor (M12), sample side',
        tangodevice = tango_base + 'optic/io/modbus',
        address = 0x3020+3*10, # word addresses
        slope = 10000,
        unit = 'mm',
        abslimits = (-79.0,77.85),
        ruler = 279.73, #abs enc! 79.6439,
        lowlevel = False,
    ),
    nok5br_motor = device(code_base + 'beckhoff.nok.BeckhoffMotorCab1M1x',
        description = 'nok5b motor (M21), reactor side',
        tangodevice = tango_base + 'optic/io/modbus',
        address = 0x3020+5*10, # word addresses
        slope = 10000,
        unit = 'mm',
        abslimits = (-37.9997, 91.9003),
        ruler = 266.947, #abs enc! 38.0997,
        lowlevel = False,
    ),
    nok5bs_motor = device(code_base + 'beckhoff.nok.BeckhoffMotorCab1M1x',
        description = 'nok5b motor (M22), sample side',
        tangodevice = tango_base + 'optic/io/modbus',
        address = 0x3020+6*10, # word addresses
        slope = 10000,
        unit = 'mm',
        abslimits = (-53.7985, 76.1015),
        ruler = 300.101, #abs enc! 53.8985,
        lowlevel = False,
    ),
    nok6r_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK6, reactor side nasty!',
        abslimits = (-66.2, 96.59125),
        bus = 'nokbus4',
        addr = 0x63,
        slope = 2000.0,
        speed = 100,
        accel = 100,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 45.51,
        zerosteps = int(704.638 * 800),
        lowlevel = False, #showcase_values['hide_poti'],
    ),
    nok6s_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK6, sample side',
        abslimits = (-81.0, 110.875),
        bus = 'nokbus3',
        addr = 0x51,
        slope = 800.0,
        speed = 40,
        accel = 40,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 46.67,
        zerosteps = int(703.5 * 800),
        lowlevel = False, #showcase_values['hide_poti'],
    ),
    nok7r_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK7, reactor side',
        abslimits = (-89.475, 116.1),
        bus = 'nokbus3',
        addr = 0x52,
        slope = 800.0,
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 62.4,
        zerosteps = int(687.6 * 800),
        lowlevel = False, #showcase_values['hide_poti'],
    ),
    nok7s_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK7, sample side',
        abslimits = (-96.94, 125.56),
        bus = 'nokbus3',
        addr = 0x53,
        slope = 800.0,
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 66.84,
        zerosteps = int(683.19 * 800),
        lowlevel = False, #showcase_values['hide_poti'],
    ),
    nok8r_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK8, reactor side',
        abslimits = (-102.835, 128.415),
        bus = 'nokbus3',
        addr = 0x54,
        slope = 800.0,
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 80.915,
        zerosteps = int(669.085 * 800),
        lowlevel = False, #showcase_values['hide_poti'],
    ),
    nok8s_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK8, sample side',
        abslimits = (-104.6, 131.65),
        bus = 'nokbus3',
        addr = 0x55,
        slope = 800.0,
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 85.499,
        zerosteps = int(664.6 * 800),
        lowlevel = False, #showcase_values['hide_poti'],
    ),
    nok9r_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK9, reactor side',
        abslimits = (-112.03425, 142.95925),
        bus = 'nokbus3',
        addr = 0x56,
        slope = 800.0,
        speed = 1,
        accel = 1,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 103.086,
        lowlevel = False, #showcase_values['hide_poti'],
        zerosteps = int(647.034 * 800),
    ),
    nok9s_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of NOK9, sample side',
        abslimits = (-114.51425, 142.62775),
        bus = 'nokbus4',
        addr = 0x61,
        slope = 800.0,
        speed = 1,
        accel = 1,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = 86.749,
        zerosteps = int(663.601 * 800),
        lowlevel = False, #showcase_values['hide_poti'],
    ),
    shutter_gamma_motor = device('nicos_mlz.refsans.devices.ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of shutter_gamma',
        abslimits = (-56.119, 1.381),
        userlimits = (-56.119, 1.381),
        bus = 'nokbus1',     # from ipcsms_*.res
        addr = 0x31,     # from resources.inf
        slope = 2000.0,  # FULL steps per physical unit
        speed = 10,
        accel = 10,
        confbyte = 48,
        ramptype = 2,
        microstep = 1,
        refpos = -14.729,    # from ipcsms_*.res
        zerosteps = int(264.619 * 2000),     # offset * slope
        lowlevel = False,
    ),
    zb0_motor = device(code_base + 'beckhoff.nok.BeckhoffMotorCab1M13',
        description = 'CAB1 controlled zb0 (M13), sample side',
        tangodevice = tango_base + 'optic/io/modbus',
        address = 0x3020+4*10, # word address
        slope = 10000,
        unit = 'mm',
        ruler = 302.679, #abs enc! -28.2111,
        abslimits = (-155.7889, 28.111099999999997),
        lowlevel = False,
    ),
    zb1_motor = device(code_base + 'beckhoff.nok.BeckhoffMotorCab1M13',
        description = 'CAB1 controlled zb1 (M23), sample side',
        tangodevice = tango_base + 'optic/io/modbus',
        address = 0x3020+7*10, # word address
        slope = 10000,
        unit = 'mm',
        ruler = 291.092, #abs enc! -54.080,
        abslimits = (-178.9,  53.9),
        lowlevel = False,
    ),
    zb2_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of ZB2',
        abslimits = (-215.69, 93.0),
        bus = 'nokbus1',
        addr = 0x37,
        slope = 800.0,
        speed = 50,
        accel = 50,
        confbyte = 32,
        ramptype = 2,
        microstep = 1,
        refpos = 68.0465,
        zerosteps = int(681.95 * 800),
        lowlevel = False, #showcase_values['hide_poti'],
    ),
    zb3r_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of ZB3, reactor side',
        abslimits = (-221.0, 95.0),
        bus = 'nokbus3',
        addr = 0x57,
        slope = 800.0,
        speed = 50,
        accel = 50,
        confbyte = 32,
        ramptype = 2,
        microstep = 1,
        refpos = 72.774,
        zerosteps = int(677.125 * 800),
        lowlevel = False, #showcase_values['hide_poti'] and showcase_values['NOreference'],
    ),
    zb3s_motor = device(code_base + 'ipc.NOKMotorIPC',
        description = 'IPC controlled Motor of ZB3, sample side',
        abslimits = (-106.0, 113.562),
        bus = 'nokbus3',
        addr = 0x58,
        slope = 800.0,
        speed = 50,
        accel = 50,
        confbyte = 32,
        ramptype = 2,
        microstep = 1,
        refpos = 105.837,
        zerosteps = int(644.562 * 800),
        lowlevel = False, #showcase_values['hide_poti'] and showcase_values['NOreference'],
    ),
)
